import{a as d,i as T}from"./vendor-Vjjz0Re7.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();const o={closeModalBtn:document.querySelector(".modal__close-btn"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),body:document.querySelector("body"),themeToggleBtn:document.querySelector(".theme-toggle-btn"),categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),notFound:document.querySelector(".not-found"),searchInput:document.querySelector(".search-form__input"),searchForm:document.querySelector(".search-form"),searchClearBtn:document.querySelector(".search-form__btn-clear"),loadMoreBtn:document.querySelector(".load-more-btn"),scrollUpBtn:document.querySelector(".scroll-top-btn"),navCount:document.querySelector(".nav__count"),loader:document.querySelector(".loader-overlay"),cartItemsCount:document.querySelector("[data-count]"),cartTotal:document.querySelector("[data-price]"),buyProductsBtn:document.querySelector(".cart-summary__btn")};function p(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("Error saving to LocalStorage:",n)}}function M(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return console.error("Error loading from LocalStorage:",e),null}}function at(){return M("theme")||"light"}function it(t){p("theme",t)}function y(){return M("cart")||[]}function G(t){const e=new Set(y().map(Number));e.add(Number(t)),p("cart",[...e])}function Y(t){const e=y().filter(n=>Number(n)!==Number(t));p("cart",e)}function N(t){return y().map(Number).includes(Number(t))}function _(){return M("wishlist")||[]}function J(t){const e=new Set(_().map(Number));e.add(Number(t)),p("wishlist",[...e])}function K(t){const e=_().filter(n=>Number(n)!==Number(t));p("wishlist",e)}function k(t){return _().map(Number).includes(Number(t))}const Q="https://dummyjson.com",u={PRODUCTS:"/products",PRODUCTS_BY_ID:"/products/",CATEGORIES:"/products/category-list",SEARCH:"/products/search"},i=12;d.defaults.baseURL=Q;async function F(t=1){const e=(t-1)*i,{data:n}=await d.get(`${u.PRODUCTS}?limit=${i}&skip=${e}`);return n}async function V(){const{data:t}=await d.get(u.CATEGORIES);return t}async function I(t){const{data:e}=await d.get(`${u.PRODUCTS_BY_ID}${t}`);return e}async function X(t,e=1){const n=(e-1)*i,{data:r}=await d.get(`${u.SEARCH}?q=${encodeURIComponent(t)}&limit=${i}&skip=${n}`);return r}async function Z(t,e=1){const n=(e-1)*i,{data:r}=await d.get(`${u.PRODUCTS}?q=${encodeURIComponent(t)}&limit=0&skip=${n}`);return r}async function O(t,e=1){const n=(e-1)*i,r=encodeURIComponent(t),{data:s}=await d.get(`${u.PRODUCTS}/category/${r}?limit=${i}&skip=${n}`);return s}async function L(t){const e=t.map(({thumbnail:n,id:r,description:s,title:c,price:l,category:w,brand:B})=>`<li class="products__item" data-id="${r}">
    <img class="products__image" src="${n}" alt="${s}"/>
    <p class="products__title">${c}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${B||"no brand"}</span></p>
    <p class="products__category">Category: ${w}</p>
    <p class="products__price">Price: ${l}$</p>
 </li>`).join("");o.productsList.insertAdjacentHTML("beforeEnd",e)}function tt(t){const n=["All",...t].map(r=>`<li class="categories__item">
    <button class="categories__btn" type="button">${r}</button>
    </li>`).join("");o.categoriesList.innerHTML=n}function H(t){const e=o.modal.querySelector(".modal-product");e.innerHTML=`<img class="modal-product__img" src="${t.thumbnail}" alt="${t.description}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t.title}</p>
        <ul class="modal-product__tags">${t.tags?.map(n=>`<li>#${n}</li>`).join("")}</ul>
        <p class="modal-product__description">${t.description}</p>
        <p class="modal-product__shipping-information">Shipping: ${t.shippingInformation||"N/A"}</p>
        <p class="modal-product__return-policy">Return Policy: ${t.returnPolicy||"N/A"}</p>
        <p class="modal-product__price">Price: ${t.price}$</p>
      </div>
`}function P(){const t=document.querySelector("[data-cart-count]"),e=document.querySelector("[data-wishlist-count]");if(!t||!e)return;const n=y().length,r=_().length;t.textContent=n,e.textContent=r}function lt(t){document.body.setAttribute("data-theme",t),document.body.dataset.theme=t,o.themeToggleBtn.innerHTML=t==="light"?"ðŸŒ™":"â˜€ï¸"}function b(){o.loader&&o.loader.classList.remove("hidden")}function C(){o.loader&&o.loader.classList.add("hidden")}function A(t){T.success({title:"OK",message:t,position:"topRight"})}function h(t){T.error({title:"Error",message:t,position:"topRight"})}function $(t){T.info({title:"Info",message:t,position:"topRight"})}function et(){const t=document.querySelector(".categories__btn--active");t&&t.classList.remove("categories__btn--active")}function U(){o.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",x),o.modal.addEventListener("click",D),o.closeModalBtn.addEventListener("click",v)}function v(){o.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",x),o.modal.removeEventListener("click",D),o.closeModalBtn.removeEventListener("click",v)}function x(t){t.code==="Escape"&&v()}function D(t){t.target===o.modal&&v()}let a=1,m="All",f="",R=0;async function dt(){try{b();const t=await V();tt(t),a=1,await S({reset:!0}),P(),o.searchClearBtn&&o.searchClearBtn.classList.add("hidden")}catch(t){console.error(t),h("Failed to initialize home page")}finally{C()}}async function S({reset:t=!1}={}){try{t&&(a=1),b();let e;f?e=await X(f,a):m&&m!=="All"?e=await O(m,a):e=await F(a);const n=e.products||[];if(R=e.total??n.length,n.length)o.notFound&&o.notFound.classList.remove("not-found--visible");else{o.productsList.innerHTML="",o.notFound&&o.notFound.classList.add("not-found--visible"),o.loadMoreBtn&&o.loadMoreBtn.classList.add("is-hidden");return}const r=!t&&a>1;L(n,{append:r}),(a-1)*i+n.length>=R?(o.loadMoreBtn&&o.loadMoreBtn.classList.add("is-hidden"),$("No more products to load")):o.loadMoreBtn&&o.loadMoreBtn.classList.remove("is-hidden")}catch(e){console.error(e),h("Failed to load products")}finally{C()}}function ut(t){const e=t.target.closest(".categories__btn");if(!e)return;o.searchInput.value="";const n=e.textContent.trim();m=n,f="",a=1,o.categoriesList.querySelectorAll(".categories__btn").forEach(s=>s.classList.toggle("categories__btn--active",s===e)),S({reset:!0}),n==="All"?ot():nt(n)}async function ot(){try{const{products:t}=await F(a);W(t),o.productsList.innerHTML="",L(t)}catch(t){console.error(t)}}async function nt(t){try{const{products:e}=await O(t,a);W(e),o.productsList.innerHTML="",L(e)}catch(e){console.error(e)}}function W(t){!t||t.length===0?o.notFound.classList.add("not-found--visible"):o.notFound.classList.remove("not-found--visible")}async function mt(t){try{const e=await I(t);H(e),U(),g(e.id),j(e.id)}catch(e){console.error(e),h("Failed to load product")}}async function ft(t){const e=t.target.closest(".products__item");if(!e)return;const n=e.dataset.id;if(n)try{b();const r=await I(n);H(r),U(),g(r.id),j(r.id)}catch(r){console.error(r),h("Failed to load product details")}finally{C()}}function j(t){const e=o.modal.querySelector(".modal-product__btn--wishlist"),n=o.modal.querySelector(".modal-product__btn--cart"),r=o.modal.querySelector(".modal-product__buy-btn");e&&(e.onclick=()=>{k(t)?(K(t),e.textContent="Add to Wishlist",$("Removed from wishlist")):(J(t),e.textContent="Remove from Wishlist",A("Added to wishlist")),P(),E&&E(),g(t)}),n&&(n.onclick=()=>{N(t)?(Y(t),n.textContent="Add to Cart",$("Removed from cart")):(G(t),n.textContent="Remove from Cart",A("Added to cart")),P(),q&&q(),g(t)}),r&&(r.onclick=()=>{window.iziToast&&iziToast.success({title:"Success",message:"Purchase complete"})})}function pt(){a+=1,S({reset:!1})}async function ht(t){t.preventDefault();const e=o.searchInput.value.trim();if(!e){h("Please, enter text");return}o.searchClearBtn.classList.remove("hidden"),et(),f=e,a=1;try{b();const{products:n}=await Z(e,a);o.productsList.innerHTML="";const r=e.toLowerCase(),s=n.filter(c=>{const l=c.title.toLowerCase().includes(r),w=c.category.toLowerCase().includes(r),B=c.tags?.some(z=>z.toLowerCase().includes(r));return l||w||B});if(s.length===0){rt();return}st(),L(s),C()}catch(n){console.log(n)}}function rt(){o.notFound.classList.add("not-found--visible")}function st(){o.notFound.classList.remove("not-found--visible")}async function gt(){o.searchInput.addEventListener("input",()=>{o.searchInput.value.trim()?o.searchClearBtn.classList.remove("hidden"):o.searchClearBtn.classList.add("hidden")}),o.searchClearBtn.addEventListener("click",()=>{o.searchInput.value="",o.searchClearBtn.classList.add("hidden"),m="All",f="",a=1,S({reset:!0})})}function yt(){o.scrollUpBtn&&(window.addEventListener("scroll",()=>{window.scrollY>300?o.scrollUpBtn.classList.add("scroll-top-btn--visible"):o.scrollUpBtn.classList.remove("scroll-top-btn--visible")}),o.scrollUpBtn.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"})))}function g(t){const e=o.modal.querySelector(".modal-product__btn--wishlist"),n=o.modal.querySelector(".modal-product__btn--cart");e&&(e.textContent=k(t)?"Remove from Wishlist":"Add to Wishlist"),n&&(n.textContent=N(t)?"Remove from Cart":"Add to Cart")}let q=null,E=null;function _t(t){q=t}function Lt(t){E=t}export{gt as A,it as B,yt as C,y as D,p as E,A as F,_t as G,H as a,U as b,K as c,$ as d,J as e,N as f,I as g,Y as h,k as i,G as j,h as k,st as l,L as m,at as n,mt as o,_ as p,Lt as q,o as r,rt as s,lt as t,P as u,dt as v,ut as w,ft as x,pt as y,ht as z};
//# sourceMappingURL=handlers-BoLw8Lo5.js.map
