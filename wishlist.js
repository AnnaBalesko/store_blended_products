import{r as e,t as u,g as h,o as g,a as p,b as v,i as C,c as w,d as m,e as y,u as i,f as M,h as P,j as b,k as F,s as T,l as f,m as d,n as k,p as W,q as B}from"./assets/handlers-mS0fClEm.js";import"./assets/vendor-Vjjz0Re7.js";let c=[];async function l(){i();const o=k();u(o);const s=W();if(!s||s.length===0){e.notFound&&e.notFound.classList.add("not-found--visible"),e.productsList.innerHTML="";return}try{e.notFound?.classList.remove("not-found--visible");const t=s.map(a=>h(a)),n=await Promise.all(t);c=n,d(n)}catch(t){console.error(t),m("Failed to load wishlist products")}}function I(o){const s=o.toLowerCase();return c.filter(t=>{const n=t.title?.toLowerCase().includes(s),a=t.category?.toLowerCase().includes(s),r=t.tags?.some(L=>L.toLowerCase().includes(s));return n||a||r})}function x(o){o.preventDefault();const s=e.searchInput.value.trim();if(!s){F("Please, enter text");return}e.searchClearBtn.classList.remove("hidden");const t=I(s);if(e.productsList.innerHTML="",t.length===0){T();return}f(),d(t)}function E(){e.searchInput.value="",e.searchClearBtn.classList.add("hidden"),f(),e.productsList.innerHTML="",d(c)}B(()=>{l()});e.searchForm?.addEventListener("submit",x);e.searchClearBtn?.addEventListener("click",E);e.themeToggleBtn?.addEventListener("click",()=>{const o=document.body.dataset.theme==="dark"?"light":"dark";u(o),saveTheme(o)});e.productsList?.addEventListener("click",async o=>{const s=o.target.closest(".products__item");if(!s)return;const t=s.dataset.id,n=await h(t);g(Number(s.dataset.id)),p(n),v();const a=e.modal.querySelector(".modal-product__btn--wishlist"),r=e.modal.querySelector(".modal-product__btn--cart");a&&(a.onclick=()=>{C(t)?(w(t),a.textContent="Add to Wishlist",m("Removed from wishlist")):(y(t),a.textContent="Remove from Wishlist"),i(),l()}),r&&(r.onclick=()=>{M(t)?(P(t),r.textContent="Add to Cart"):(b(t),r.textContent="Remove from Cart"),i()})});document.addEventListener("DOMContentLoaded",l);
//# sourceMappingURL=wishlist.js.map
