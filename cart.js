import{r as t,t as h,g as f,o as v,a as g,b as T,i as y,c as b,d as L,e as M,u as c,f as F,h as P,j as k,D as C,E as w,F as x,k as I,s as B,l as p,m as u,n as E,G as H}from"./assets/handlers-BoLw8Lo5.js";import"./assets/vendor-Vjjz0Re7.js";let i=[];async function m(){c();const o=E();h(o);const s=C();if(!s||s.length===0){t.notFound&&t.notFound.classList.add("not-found--visible"),t.productsList.innerHTML="",i=[],l(0,0);return}try{t.notFound?.classList.remove("not-found--visible");const e=s.map(a=>f(a)),n=await Promise.all(e);i=n,t.productsList.innerHTML="",u(n);const r=n.reduce((a,d)=>a+(d.price||0),0);l(n.length,r)}catch(e){console.error(e)}}function S(o){const s=o.toLowerCase();return i.filter(e=>{const n=e.title?.toLowerCase().includes(s),r=e.category?.toLowerCase().includes(s),a=e.tags?.some(d=>d.toLowerCase().includes(s));return n||r||a})}function _(o){o.preventDefault();const s=t.searchInput.value.trim();if(!s){I("Please, enter text");return}t.searchClearBtn.classList.remove("hidden");const e=S(s);if(t.productsList.innerHTML="",e.length===0){B();return}p(),u(e)}function N(){t.searchInput.value="",t.searchClearBtn.classList.add("hidden"),p(),t.productsList.innerHTML="",u(i)}H(()=>{m()});t.searchForm?.addEventListener("submit",_);t.searchClearBtn?.addEventListener("click",N);function l(o,s){t.cartItemsCount&&(t.cartItemsCount.textContent=o),t.cartTotal&&(t.cartTotal.textContent=`$${Number(s).toFixed(2)};`)}t.themeToggleBtn?.addEventListener("click",()=>{const o=document.body.dataset.theme==="dark"?"light":"dark";h(o),saveTheme(o)});t.productsList?.addEventListener("click",async o=>{const s=o.target.closest(".products__item");if(!s)return;const e=s.dataset.id,n=await f(e);v(Number(s.dataset.id)),g(n),T();const r=t.modal.querySelector(".modal-product__btn--wishlist"),a=t.modal.querySelector(".modal-product__btn--cart");r&&(r.onclick=()=>{y(e)?(b(e),r.textContent="Add to Wishlist",L("Removed from wishlist")):(M(e),r.textContent="Remove from Wishlist"),c()}),a&&(a.onclick=()=>{F(e)?(P(e),a.textContent="Add to Cart"):(k(e),a.textContent="Remove from Cart"),c(),m()})});t.buyProductsBtn?.addEventListener("click",()=>{const o=C();if(!o||o.length===0){L("Cart empty, please add product");return}w("cart",[]),x("Thank you! Your order has been placed."),t.notFound.classList.add("not-found--visible"),t.productsList.innerHTML="",c(),l(0,0)});document.addEventListener("DOMContentLoaded",m);
//# sourceMappingURL=cart.js.map
