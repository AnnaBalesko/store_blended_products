{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["//Логіка сторінки Cart\n\nimport { refs } from './js/refs';\nimport * as storage from './js/storage';\nimport * as api from './js/products-api';\nimport {\n  renderProducts,\n  renderModalProduct,\n  updateNavCount,\n} from './js/render-function';\nimport { openModal } from './js/modal';\nimport { toastSuccess, toggleTheme } from './js/helpers';\n\nasync function initCartPage() {\n  updateNavCount();\n  const saved = storage.getTheme();\n  toggleTheme(saved);\n  const ids = storage.getCart();\n  if (!ids || ids.length === 0) {\n    if (refs.notFound) refs.notFound.classList.add('not-found--visible');\n    refs.productsList.innerHTML = '';\n    updateSummary(0, 0);\n    return;\n  }\n\n  try {\n    refs.notFound?.classList.remove('not-found--visible');\n    const promises = ids.map(id => api.getProductById(id));\n    const products = await Promise.all(promises);\n    renderProducts(products);\n    const total = products.reduce((s, p) => s + (p.price || 0), 0);\n    updateSummary(products.length, total);\n  } catch (err) {\n    console.error(err);\n  }\n}\n\nrefs.themeToggleBtn?.addEventListener('click', () => {\n    const next = document.body.dataset.theme === 'dark' ? 'light' : 'dark';\n    toggleTheme(next);\n    saveTheme(next);\n  });\n\nfunction updateSummary(items, total) {\n  if (refs.cartItemsCount) refs.cartItemsCount.textContent = items;\n  if (refs.cartTotal)\n    refs.cartTotal.textContent = `$${Number(total).toFixed(2)};`;\n}\n\nrefs.productsList?.addEventListener('click', async e => {\n  const li = e.target.closest('.products__item');\n  if (!li) return;\n  const id = li.dataset.id;\n  const product = await api.getProductById(id);\n  renderModalProduct(product);\n  openModal();\n});\n\nrefs.buyProductsBtn?.addEventListener('click', () => {\n  toastSuccess('Thank you! Your order has been placed.');\n});\n\ndocument.addEventListener('DOMContentLoaded', initCartPage);\n"],"names":["initCartPage","updateNavCount","saved","storage.getTheme","toggleTheme","ids","storage.getCart","refs","updateSummary","promises","id","api.getProductById","products","renderProducts","total","s","p","err","next","items","li","product","renderModalProduct","openModal","toastSuccess"],"mappings":"oJAaA,eAAeA,GAAe,CAC5BC,EAAc,EACd,MAAMC,EAAQC,EAAgB,EAC9BC,EAAYF,CAAK,EACjB,MAAMG,EAAMC,EAAe,EAC3B,GAAI,CAACD,GAAOA,EAAI,SAAW,EAAG,CACxBE,EAAK,UAAUA,EAAK,SAAS,UAAU,IAAI,oBAAoB,EACnEA,EAAK,aAAa,UAAY,GAC9BC,EAAc,EAAG,CAAC,EAClB,MACF,CAEA,GAAI,CACFD,EAAK,UAAU,UAAU,OAAO,oBAAoB,EACpD,MAAME,EAAWJ,EAAI,IAAIK,GAAMC,EAAmBD,CAAE,CAAC,EAC/CE,EAAW,MAAM,QAAQ,IAAIH,CAAQ,EAC3CI,EAAeD,CAAQ,EACvB,MAAME,EAAQF,EAAS,OAAO,CAACG,EAAGC,IAAMD,GAAKC,EAAE,OAAS,GAAI,CAAC,EAC7DR,EAAcI,EAAS,OAAQE,CAAK,CACtC,OAASG,EAAK,CACZ,QAAQ,MAAMA,CAAG,CACnB,CACF,CAEAV,EAAK,gBAAgB,iBAAiB,QAAS,IAAM,CACjD,MAAMW,EAAO,SAAS,KAAK,QAAQ,QAAU,OAAS,QAAU,OAChEd,EAAYc,CAAI,EAChB,UAAUA,CAAI,CAChB,CAAC,EAEH,SAASV,EAAcW,EAAOL,EAAO,CAC/BP,EAAK,iBAAgBA,EAAK,eAAe,YAAcY,GACvDZ,EAAK,YACPA,EAAK,UAAU,YAAc,IAAI,OAAOO,CAAK,EAAE,QAAQ,CAAC,CAAC,IAC7D,CAEAP,EAAK,cAAc,iBAAiB,QAAS,MAAM,GAAK,CACtD,MAAMa,EAAK,EAAE,OAAO,QAAQ,iBAAiB,EAC7C,GAAI,CAACA,EAAI,OACT,MAAMV,EAAKU,EAAG,QAAQ,GAChBC,EAAU,MAAMV,EAAmBD,CAAE,EAC3CY,EAAmBD,CAAO,EAC1BE,EAAS,CACX,CAAC,EAEDhB,EAAK,gBAAgB,iBAAiB,QAAS,IAAM,CACnDiB,EAAa,wCAAwC,CACvD,CAAC,EAED,SAAS,iBAAiB,mBAAoBxB,CAAY"}