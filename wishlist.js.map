{"version":3,"file":"wishlist.js","sources":["../src/wishlist.js"],"sourcesContent":["//Логіка сторінки Wishlist\n\nimport { refs } from './js/refs';\nimport * as storage from './js/storage';\nimport * as api from './js/products-api';\nimport {\n  renderProducts,\n  renderModalProduct,\n  updateNavCount,\n} from './js/render-function';\nimport { openModal } from './js/modal';\nimport { toastInfo } from './js/helpers';\n\nasync function initWishlistPage() {\n  updateNavCount();\n  const ids = storage.getWishlist();\n  if (!ids || ids.length === 0) {\n    if (refs.notFound) refs.notFound.classList.add('not-found--visible');\n    refs.productsList.innerHTML = '';\n    return;\n  }\n\n  try {\n    refs.notFound?.classList.remove('not-found--visible');\n    const promises = ids.map(id => api.getProductById(id));\n    const products = await Promise.all(promises);\n    renderProducts(products);\n  } catch (err) {\n    console.error(err);\n    toastInfo('Failed to load wishlist products');\n  }\n}\n\nrefs.productsList?.addEventListener('click', async e => {\n  const li = e.target.closest('.products__item');\n  if (!li) return;\n  const id = li.dataset.id;\n  const product = await api.getProductById(id);\n  renderModalProduct(product);\n  openModal();\n  const wishlistBtn = refs.modal.querySelector('.modal-product__wishlist-btn');\n  const cartBtn = refs.modal.querySelector('.modal-product__cart-btn');\n\n  if (wishlistBtn) {\n    wishlistBtn.onclick = () => {\n      if (storage.isInWishlist(id)) {\n        storage.removeFromWishlist(id);\n        wishlistBtn.textContent = 'Add to Wishlist';\n        toastInfo('Removed from wishlist');\n      } else {\n        storage.addToWishlist(id);\n        wishlistBtn.textContent = 'Remove from Wishlist';\n      }\n      updateNavCount();\n    };\n  }\n  if (cartBtn) {\n    cartBtn.onclick = () => {\n      if (storage.isInCart(id)) {\n        storage.removeFromCart(id);\n        cartBtn.textContent = 'Add to Cart';\n      } else {\n        storage.addToCart(id);\n        cartBtn.textContent = 'Remove from Cart';\n      }\n      updateNavCount();\n    };\n  }\n});\n\ndocument.addEventListener('DOMContentLoaded', initWishlistPage);\n"],"names":["initWishlistPage","updateNavCount","ids","storage.getWishlist","refs","promises","id","api.getProductById","products","renderProducts","err","toastInfo","li","product","renderModalProduct","openModal","wishlistBtn","cartBtn","storage.isInWishlist","storage.removeFromWishlist","storage.addToWishlist","storage.isInCart","storage.removeFromCart","storage.addToCart"],"mappings":"gLAaA,eAAeA,GAAmB,CAChCC,EAAc,EACd,MAAMC,EAAMC,EAAmB,EAC/B,GAAI,CAACD,GAAOA,EAAI,SAAW,EAAG,CACxBE,EAAK,UAAUA,EAAK,SAAS,UAAU,IAAI,oBAAoB,EACnEA,EAAK,aAAa,UAAY,GAC9B,MACF,CAEA,GAAI,CACFA,EAAK,UAAU,UAAU,OAAO,oBAAoB,EACpD,MAAMC,EAAWH,EAAI,IAAII,GAAMC,EAAmBD,CAAE,CAAC,EAC/CE,EAAW,MAAM,QAAQ,IAAIH,CAAQ,EAC3CI,EAAeD,CAAQ,CACzB,OAASE,EAAK,CACZ,QAAQ,MAAMA,CAAG,EACjBC,EAAU,kCAAkC,CAC9C,CACF,CAEAP,EAAK,cAAc,iBAAiB,QAAS,MAAM,GAAK,CACtD,MAAMQ,EAAK,EAAE,OAAO,QAAQ,iBAAiB,EAC7C,GAAI,CAACA,EAAI,OACT,MAAMN,EAAKM,EAAG,QAAQ,GAChBC,EAAU,MAAMN,EAAmBD,CAAE,EAC3CQ,EAAmBD,CAAO,EAC1BE,EAAS,EACT,MAAMC,EAAcZ,EAAK,MAAM,cAAc,8BAA8B,EACrEa,EAAUb,EAAK,MAAM,cAAc,0BAA0B,EAE/DY,IACFA,EAAY,QAAU,IAAM,CACtBE,EAAqBZ,CAAE,GACzBa,EAA2Bb,CAAE,EAC7BU,EAAY,YAAc,kBAC1BL,EAAU,uBAAuB,IAEjCS,EAAsBd,CAAE,EACxBU,EAAY,YAAc,wBAE5Bf,EAAc,CAChB,GAEEgB,IACFA,EAAQ,QAAU,IAAM,CAClBI,EAAiBf,CAAE,GACrBgB,EAAuBhB,CAAE,EACzBW,EAAQ,YAAc,gBAEtBM,EAAkBjB,CAAE,EACpBW,EAAQ,YAAc,oBAExBhB,EAAc,CAChB,EAEJ,CAAC,EAED,SAAS,iBAAiB,mBAAoBD,CAAgB"}