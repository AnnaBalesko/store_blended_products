{"version":3,"file":"wishlist.js","sources":["../src/wishlist.js"],"sourcesContent":["//Логіка сторінки Wishlist\n\nimport { refs } from './js/refs';\nimport * as storage from './js/storage';\nimport * as api from './js/products-api';\nimport {\n  renderProducts,\n  renderModalProduct,\n  updateNavCount,\n} from './js/render-function';\nimport { openModal } from './js/modal';\nimport { toastInfo, toggleTheme } from './js/helpers';\n\nasync function initWishlistPage() {\n  updateNavCount();\n  const saved = storage.getTheme();\n  toggleTheme(saved);\n  const ids = storage.getWishlist();\n  if (!ids || ids.length === 0) {\n    if (refs.notFound) refs.notFound.classList.add('not-found--visible');\n    refs.productsList.innerHTML = '';\n    return;\n  }\n\n  try {\n    refs.notFound?.classList.remove('not-found--visible');\n    const promises = ids.map(id => api.getProductById(id));\n    const products = await Promise.all(promises);\n    renderProducts(products);\n  } catch (err) {\n    console.error(err);\n    toastInfo('Failed to load wishlist products');\n  }\n}\n\nrefs.themeToggleBtn?.addEventListener('click', () => {\n  const next = document.body.dataset.theme === 'dark' ? 'light' : 'dark';\n  toggleTheme(next);\n  saveTheme(next);\n});\n\nrefs.productsList?.addEventListener('click', async e => {\n  const li = e.target.closest('.products__item');\n  if (!li) return;\n  const id = li.dataset.id;\n  const product = await api.getProductById(id);\n  renderModalProduct(product);\n  openModal();\n  const wishlistBtn = refs.modal.querySelector('.modal-product__wishlist-btn');\n  const cartBtn = refs.modal.querySelector('.modal-product__cart-btn');\n\n  if (wishlistBtn) {\n    wishlistBtn.onclick = () => {\n      if (storage.isInWishlist(id)) {\n        storage.removeFromWishlist(id);\n        wishlistBtn.textContent = 'Add to Wishlist';\n        toastInfo('Removed from wishlist');\n      } else {\n        storage.addToWishlist(id);\n        wishlistBtn.textContent = 'Remove from Wishlist';\n      }\n      updateNavCount();\n    };\n  }\n  if (cartBtn) {\n    cartBtn.onclick = () => {\n      if (storage.isInCart(id)) {\n        storage.removeFromCart(id);\n        cartBtn.textContent = 'Add to Cart';\n      } else {\n        storage.addToCart(id);\n        cartBtn.textContent = 'Remove from Cart';\n      }\n      updateNavCount();\n    };\n  }\n});\n\ndocument.addEventListener('DOMContentLoaded', initWishlistPage);\n"],"names":["initWishlistPage","updateNavCount","saved","storage.getTheme","toggleTheme","ids","storage.getWishlist","refs","promises","id","api.getProductById","products","renderProducts","err","toastInfo","next","e","li","product","renderModalProduct","openModal","wishlistBtn","cartBtn","storage.isInWishlist","storage.removeFromWishlist","storage.addToWishlist","storage.isInCart","storage.removeFromCart","storage.addToCart"],"mappings":"yLAaA,eAAeA,GAAmB,CAChCC,EAAc,EACd,MAAMC,EAAQC,EAAgB,EAC9BC,EAAYF,CAAK,EACjB,MAAMG,EAAMC,EAAmB,EAC/B,GAAI,CAACD,GAAOA,EAAI,SAAW,EAAG,CACxBE,EAAK,UAAUA,EAAK,SAAS,UAAU,IAAI,oBAAoB,EACnEA,EAAK,aAAa,UAAY,GAC9B,MACF,CAEA,GAAI,CACFA,EAAK,UAAU,UAAU,OAAO,oBAAoB,EACpD,MAAMC,EAAWH,EAAI,IAAII,GAAMC,EAAmBD,CAAE,CAAC,EAC/CE,EAAW,MAAM,QAAQ,IAAIH,CAAQ,EAC3CI,EAAeD,CAAQ,CACzB,OAASE,EAAK,CACZ,QAAQ,MAAMA,CAAG,EACjBC,EAAU,kCAAkC,CAC9C,CACF,CAEAP,EAAK,gBAAgB,iBAAiB,QAAS,IAAM,CACnD,MAAMQ,EAAO,SAAS,KAAK,QAAQ,QAAU,OAAS,QAAU,OAChEX,EAAYW,CAAI,EAChB,UAAUA,CAAI,CAChB,CAAC,EAEDR,EAAK,cAAc,iBAAiB,QAAS,MAAMS,GAAK,CACtD,MAAMC,EAAKD,EAAE,OAAO,QAAQ,iBAAiB,EAC7C,GAAI,CAACC,EAAI,OACT,MAAMR,EAAKQ,EAAG,QAAQ,GAChBC,EAAU,MAAMR,EAAmBD,CAAE,EAC3CU,EAAmBD,CAAO,EAC1BE,EAAS,EACT,MAAMC,EAAcd,EAAK,MAAM,cAAc,8BAA8B,EACrEe,EAAUf,EAAK,MAAM,cAAc,0BAA0B,EAE/Dc,IACFA,EAAY,QAAU,IAAM,CACtBE,EAAqBd,CAAE,GACzBe,EAA2Bf,CAAE,EAC7BY,EAAY,YAAc,kBAC1BP,EAAU,uBAAuB,IAEjCW,EAAsBhB,CAAE,EACxBY,EAAY,YAAc,wBAE5BpB,EAAc,CAChB,GAEEqB,IACFA,EAAQ,QAAU,IAAM,CAClBI,EAAiBjB,CAAE,GACrBkB,EAAuBlB,CAAE,EACzBa,EAAQ,YAAc,gBAEtBM,EAAkBnB,CAAE,EACpBa,EAAQ,YAAc,oBAExBrB,EAAc,CAChB,EAEJ,CAAC,EAED,SAAS,iBAAiB,mBAAoBD,CAAgB"}