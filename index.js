import"./assets/styles-I8qp1LAa.js";import{a as i}from"./assets/vendor-BWC8OeqA.js";const E="https://dummyjson.com",l={PRODUCTS:"/products",PRODUCTS_BY_ID:"/products/",CATEGORIES:"/products/category-list",SEARCH:"/products/search"},s=12;i.defaults.baseURL=E;async function f(t=1){const e=(t-1)*s,{data:n}=await i.get(`${l.PRODUCTS}?limit=${s}&skip=${e}`);return console.log(n),n}async function $(){const{data:t}=await i.get(l.CATEGORIES);return t}async function C(t){const{data:e}=await i.get(`${l.PRODUCTS_BY_ID}${t}`);return e}async function P(t,e=1){const n=(e-1)*s,{data:c}=await i.get(`${l.SEARCH}?q=${encodeURIComponent(t)}&limit=${s}&skip=${n}`);return c}async function k(t,e=1){const n=(e-1)*s,c=encodeURIComponent(t),{data:r}=await i.get(`${l.PRODUCTS}/category/${c}?limit=${s}&skip=${n}`);return r}const o={closeModalBtn:document.querySelector(".modal__close-btn"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),body:document.querySelector("body"),themeToggleBtn:document.querySelector(".theme-toggle-btn"),categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),notFound:document.querySelector(".not-found"),searchInput:document.querySelector(".search-form__input"),searchForm:document.querySelector(".search-form"),searchClearBtn:document.querySelector(".search-form__btn-clear")};async function u(t){const e=t.map(({thumbnail:n,id:c,description:r,title:d,price:p,category:g,brand:y})=>`<li class="products__item" data-id="${c}">
    <img class="products__image" src="${n}" alt="${r}"/>
    <p class="products__title">${d}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${y||"no brand"}</span></p>
    <p class="products__category">Category: ${g}</p>
    <p class="products__price">Price: ${p}$</p>
 </li>`).join("");o.productsList.insertAdjacentHTML("beforeEnd",e)}function w(t){const n=["All",...t].map(c=>`<li class="categories__item">
    <button class="categories__btn" type="button">${c}</button>
    </li>`).join("");o.categoriesList.innerHTML=n}function T(t){const e=o.modal.querySelector(".modal-product");e.innerHTML=`<img class="modal-product__img" src="${t.thumbnail}" alt="${t.description}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t.title}</p>
        <ul class="modal-product__tags">${t.tags?.map(n=>`<li>#${n}</li>`).join("")}</ul>
        <p class="modal-product__description">${t.description}</p>
        <p class="modal-product__shipping-information">Shipping: ${t.shippingInformation||"N/A"}</p>
        <p class="modal-product__return-policy">Return Policy: ${t.returnPolicy||"N/A"}</p>
        <p class="modal-product__price">Price: ${t.price}$</p>
      </div>
`}function M(){o.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",_),o.modal.addEventListener("click",h),o.closeModalBtn.addEventListener("click",m)}function m(){o.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",_),o.modal.removeEventListener("click",h),o.closeModalBtn.removeEventListener("click",m)}function _(t){t.code==="Escape"&&m()}function h(t){t.target===o.modal&&m()}async function B(){try{const t=await $();w(t);const{products:e}=await f();u(e)}catch(t){console.error(t),toastError("Failed to initialize home page")}finally{}}let a=1;async function I(t){const e=t.target.closest(".categories__btn");if(!e)return;const n=e.textContent.trim();a=1,o.categoriesList.querySelectorAll(".categories__btn").forEach(r=>r.classList.toggle("categories__btn--active",r===e)),n==="All"?q():A(n)}async function q(){try{const{products:t}=await f(a);v(t),o.productsList.innerHTML="",u(t)}catch(t){console.error(t)}}async function A(t){try{const{products:e}=await k(t,a);v(e),o.productsList.innerHTML="",u(e)}catch(e){console.error(e)}}function v(t){!t||t.length===0?o.notFound.classList.add("not-found--visible"):o.notFound.classList.remove("not-found--visible")}function R(t){const e=t.target.closest(".products__item");if(!e)return;const n=e.dataset.id;n&&H(n)}async function H(t){try{const e=await C(t);console.log(e),T(e),M()}catch(e){console.error("Modal product error:",e)}}async function D(t){t.preventDefault();const e=o.searchInput.value.trim();if(e){a=1,o.categoriesList.classList.add("hidden");try{const{products:n}=await P(e,a);o.productsList.innerHTML="";const c=e.toLowerCase(),r=n.filter(d=>{const p=d.title.toLowerCase().includes(c),g=d.category.toLowerCase().includes(c),y=d.tags?.some(b=>b.toLowerCase().includes(c));return p||g||y});if(r.length===0){O();return}S(),u(r)}catch(n){console.log(n)}}}async function F(){o.searchInput.value="",a=1,S(),o.categoriesList.classList.remove("hidden");const{products:t}=await f();o.productsList.innerHTML="",u(t)}function O(){o.notFound.classList.add("not-found--visible")}function S(){o.notFound.classList.remove("not-found--visible")}function L(t){document.body.setAttribute("data-theme",t),document.body.dataset.theme=t,o.themeToggleBtn.innerHTML=t==="light"?"ðŸŒ™":"â˜€ï¸"}function U(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("Error saving to LocalStorage:",n)}}function N(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return console.error("Error loading from LocalStorage:",e),null}}function j(){return N("theme")||"light"}function x(t){U("theme",t)}document.addEventListener("DOMContentLoaded",B);document.addEventListener("DOMContentLoaded",()=>{const t=j();L(t),o.themeToggleBtn?.addEventListener("click",()=>{const e=document.body.dataset.theme==="dark"?"light":"dark";L(e),x(e)})});o.categoriesList.addEventListener("click",I);o.productsList.addEventListener("click",R);o.searchForm.addEventListener("submit",D);o.searchClearBtn.addEventListener("click",F);o.searchInput.addEventListener("input",()=>{o.searchInput.value.trim()?o.searchClearBtn.classList.add("visible"):o.searchClearBtn.classList.remove("visible")});
//# sourceMappingURL=index.js.map
