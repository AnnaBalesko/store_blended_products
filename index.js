import{s as l,m as E,n as _,u as L,r as t,p as d,q as u,g as k,a as A,o as T,v as S,w as H,l as h,x,y as C,z as B,I as q,c as v,i as I,b as R,d as U,A as g,e as W,f as z,h as N,j as D,t as p,B as j}from"./assets/helpers-C4aAawho.js";import"./assets/vendor-Vjjz0Re7.js";let n=1,i="All",c="",y=0;async function G(){try{l();const s=await E();_(s),n=1,await f({reset:!0}),L(),t.searchClearBtn&&t.searchClearBtn.classList.add("hidden")}catch(s){console.error(s),d("Failed to initialize home page")}finally{u()}}async function f({reset:s=!1}={}){try{s&&(n=1),l();let e;c?e=await x(c,n):i&&i!=="All"?e=await C(i,n):e=await B(n);const o=e.products||[];if(y=e.total??o.length,o.length)t.notFound&&t.notFound.classList.remove("not-found--visible");else{t.productsList.innerHTML="",t.notFound&&t.notFound.classList.add("not-found--visible"),t.loadMoreBtn&&t.loadMoreBtn.classList.add("is-hidden");return}const a=!s&&n>1;h(o,{append:a}),(n-1)*q+o.length>=y?(t.loadMoreBtn&&t.loadMoreBtn.classList.add("is-hidden"),v("No more products to load")):t.loadMoreBtn&&t.loadMoreBtn.classList.remove("is-hidden")}catch(e){console.error(e),d("Failed to load products")}finally{u()}}function O(s){const e=s.target.closest(".categories__btn");if(!e)return;t.searchInput.value="";const o=e.textContent.trim();i=o,c="",n=1,t.categoriesList.querySelectorAll(".categories__btn").forEach(r=>r.classList.toggle("categories__btn--active",r===e)),f({reset:!0}),o==="All"?Q():Y(o)}async function Q(){try{const{products:s}=await B(n);w(s),t.productsList.innerHTML="",h(s)}catch(s){console.error(s)}}async function Y(s){try{const{products:e}=await C(s,n);w(e),t.productsList.innerHTML="",h(e)}catch(e){console.error(e)}}function w(s){!s||s.length===0?t.notFound.classList.add("not-found--visible"):t.notFound.classList.remove("not-found--visible")}async function J(s){const e=s.target.closest(".products__item");if(!e)return;const o=e.dataset.id;if(o)try{l();const a=await k(o);A(a),T(),K(a.id)}catch(a){console.error(a),d("Failed to load product details")}finally{u()}}function K(s){const e=t.modal.querySelector(".modal-product__btn--wishlist"),o=t.modal.querySelector(".modal-product__btn--cart"),a=t.modal.querySelector(".modal-product__buy-btn");e&&(e.onclick=()=>{I(s)?(R(s),e.textContent="Add to Wishlist",v("Removed from wishlist")):(U(s),e.textContent="Remove from Wishlist",g("Added to wishlist")),L()}),o&&(o.onclick=()=>{W(s)?(z(s),o.textContent="Add to Cart",v("Removed from cart")):(N(s),o.textContent="Remove from Cart",g("Added to cart")),L()}),a&&(a.onclick=()=>{window.iziToast&&iziToast.success({title:"Success",message:"Purchase complete"})})}function V(){n+=1,f({reset:!1})}async function X(s){s.preventDefault();const e=t.searchInput.value.trim();if(!e){d("Please, enter text");return}t.searchClearBtn.classList.remove("hidden"),S(),c=e,n=1;try{l();const{products:o}=await H(e,n);t.productsList.innerHTML="";const a=e.toLowerCase(),r=o.filter(m=>{const b=m.title.toLowerCase().includes(a),M=m.category.toLowerCase().includes(a),F=m.tags?.some(P=>P.toLowerCase().includes(a));return b||M||F});if(r.length===0){Z();return}$(),h(r),u()}catch(o){console.log(o)}}function Z(){t.notFound.classList.add("not-found--visible")}function $(){t.notFound.classList.remove("not-found--visible")}async function tt(){t.searchInput.addEventListener("input",()=>{t.searchInput.value.trim()?t.searchClearBtn.classList.remove("hidden"):t.searchClearBtn.classList.add("hidden")}),t.searchClearBtn.addEventListener("click",()=>{t.searchInput.value="",t.searchClearBtn.classList.add("hidden"),i="All",c="",n=1,f({reset:!0})})}function et(){t.scrollUpBtn&&(window.addEventListener("scroll",()=>{window.scrollY>300?t.scrollUpBtn.classList.add("scroll-top-btn--visible"):t.scrollUpBtn.classList.remove("scroll-top-btn--visible")}),t.scrollUpBtn.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"})))}document.addEventListener("DOMContentLoaded",()=>{const s=D();p(s),G(),t.categoriesList?.addEventListener("click",O),t.productsList?.addEventListener("click",J),t.loadMoreBtn?.addEventListener("click",V),t.searchForm?.addEventListener("submit",X),t.searchClearBtn?.addEventListener("click",tt),t.themeToggleBtn?.addEventListener("click",()=>{const e=document.body.dataset.theme==="dark"?"light":"dark";p(e),j(e)}),et()});
//# sourceMappingURL=index.js.map
